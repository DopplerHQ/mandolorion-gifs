// See https://aka.ms/devcontainer.json for spec
{
  "name": "Mandalorion GIFs",
  "settings": {
    "python.pythonPath": "/usr/local/bin/python",
  },
  "extensions": [
    "ms-python.python"
  ],
  "build": {
    "dockerfile": "../Dockerfile"
  },
  "postCreateCommand": "pip install  --quiet --no-cache-dir -r requirements-dev.txt",
  "forwardPorts": [
    8080
  ],
  "runArgs": [
    // Two options for supplying environment variables:
    //
    // 1. Use the embedded Doppler CLI (preferred):
    // - Run `make devcontainer-service-token` to save a new dev Service Token to .devcontainer/.env
    // - Start the server using the `python: doppler dev container`
    //
    // 2. Supply env vars to dev container
    // - Run `make devcontainer-env-file` to save the secrets to a .devcontainer/.env file
    // - Start the server using the `make python: dev container`
    //
    "--env-file",
    ".devcontainer/.env"
  ]
}